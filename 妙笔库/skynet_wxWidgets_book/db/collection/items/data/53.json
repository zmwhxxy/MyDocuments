{"id":"01gexktmpezb1j0bhn5b4s7nt4","add_time_ms":1665293701839,"icon":"book","type":"doc","title":"图片按钮","_id":"53","content":"wxBitmapButton\n\n  位图按钮是一个显示位图的按钮。位图按钮可以有其他三种状态。选定、聚焦并显示。我们可以为这些状态设置一个特定的位图。\n\nbitmapbutton.h\n\n    #include <wx/wx.h>\n    #include <wx/slider.h>\n    \n    class BitmapButton : public wxFrame\n    {\n    public:\n     BitmapButton(const wxString& title);\n     wxSlider *slider;\n     wxBitmapButton *button;\n     int pos;\n     void OnScroll(wxScrollEvent& event);\n    };\n    const int ID_SLIDER = 100;\n\nbitmapbutton.cpp\n\n    #include \"bitmapbutton.h\"\n    \n    BitmapButton::BitmapButton(const wxString& title)\n     : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(250, 130))\n    {\n     wxImage::AddHandler( new wxPNGHandler );\n     wxPanel *panel = new wxPanel(this);\n     slider = new wxSlider(panel, ID_SLIDER, 0, 0, 100, \n     wxPoint(10, 30), wxSize(140, -1));\n     button = new wxBitmapButton(panel, wxID_ANY, wxBitmap(wxT(\"mute.png\"), \n     wxBITMAP_TYPE_PNG), wxPoint(180, 20));\n     Connect(ID_SLIDER, wxEVT_COMMAND_SLIDER_UPDATED, \n     wxScrollEventHandler(BitmapButton::OnScroll)); \n     Center();\n    }\n    void BitmapButton::OnScroll(wxScrollEvent& event)\n    {\n     pos = slider->GetValue(); \n     if (pos == 0) {\n     button->SetBitmapLabel(wxBitmap(wxT(\"mute.png\"), wxBITMAP_TYPE_PNG));\n     } else if (pos > 0 && pos <= 30 ) {\n     button->SetBitmapLabel(wxBitmap(wxT(\"min.png\"), wxBITMAP_TYPE_PNG));\n     } else if (pos > 30 && pos < 80 ) {\n     button->SetBitmapLabel(wxBitmap(wxT(\"med.png\"), wxBITMAP_TYPE_PNG));\n     } else {\n     button->SetBitmapLabel(wxBitmap(wxT(\"max.png\"), wxBITMAP_TYPE_PNG));\n     }\n    }\n\nmain.h\n\n    #include <wx/wx.h>\n    class MyApp : public wxApp\n    {\n     public:\n     virtual bool OnInit();\n    };\n\nmain.cpp\n\n    #include \"main.h\"\n    #include \"bitmapbutton.h\"\n    IMPLEMENT_APP(MyApp)\n    bool MyApp::OnInit()\n    {\n     BitmapButton *bb = new BitmapButton(wxT(\"BitmapButton\"));\n     bb->Show(true);\n     return true;\n    }\n\nCMakeLists.txt\n\n    cmake_minimum_required(VERSION 3.16)\n    project(bitmapbutton)\n    \n    set(CMAKE_CXX_STANDARD 14)\n    \n    #添加预编译指令\n    add_definitions(\n            -DwxMSVC_VERSION_AUTO=1\n            -DwxMSVC_VERSION_COMAPT=1\n    )\n    \n    #包含搜索路径\n    include_directories(\n            $ENV{WXWIN}/include\n            $ENV{WXWIN}/lib/vc14x_lib/mswud\n    )\n    \n    #设置链接库目录\n    link_directories(\n            $ENV{WXWIN}/lib/vc14x_lib\n    )\n    \n    #添加可执行文件\n    add_executable(\n            ${PROJECT_NAME}\n            main.cpp main.h\n            bitmapbutton.cpp bitmapbutton.h)\n    \n    #设置程序属性\n    set_target_properties(\n            ${PROJECT_NAME}\n                PROPERTIES\n            MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>\"\n            WIN32_EXECUTABLE true\n    )\n    \n    #链接所有的链接库到目标文件\n    target_link_libraries(\n            ${PROJECT_NAME}\n            shlwapi.lib\n            version.lib\n            comctl32.lib\n            rpcrt4.lib\n            ws2_32.lib\n            wininet.lib\n            winmm.lib\n            wxmsw32ud_gl.lib\n            wxmsw32ud_stc.lib\n            wxmsw32ud_richtext.lib\n            wxmsw32ud_propgrid.lib\n            wxmsw32ud_ribbon.lib\n            wxmsw32ud_aui.lib\n            wxmsw32ud_xrc.lib\n            wxbase32ud_xml.lib\n            wxmsw32ud_qa.lib\n            wxmsw32ud_webview.lib\n            wxmsw32ud_html.lib\n            wxmsw32ud_media.lib\n            wxmsw32ud_adv.lib\n            wxmsw32ud_core.lib\n            wxbase32ud_net.lib\n            wxbase32ud.lib\n            wxscintillad.lib\n            wxexpatd.lib\n            wxtiffd.lib\n            wxjpegd.lib\n            wxpngd.lib\n            wxzlibd.lib\n            wxregexud.lib\n            wxmsw32u_gl.lib\n    )\n\n图片资源\n\nmax.png \n    ![max]({$WP_ASSETS}/e2aad7a93301874f6aac565c09641d81.png)\n\nmed.png\n    ![med]({$WP_ASSETS}/a22834cc47322ae94251d69b5b65ced8.png)\n\nmin.png\n    ![min]({$WP_ASSETS}/9ea05be8101edaa919203914b5333de7.png)\n\nmute.png\n    ![mute]({$WP_ASSETS}/16935c9c53840c75ca18228b17d5b798.png)   \n              ","edit_time_ms":1665297760385,"char_count":{"word":347,"char_without_spaces":2737,"char_with_spaces":3780}}