{"id":"01gevqrs5gdz5azz3ga1jms768","add_time_ms":1665230726320,"icon":"book","type":"doc","title":"自定义对话框","_id":"50","content":"自定义对话框\n\n在接下来的示例中，我们将创建一个对话框程序。这个程序可以改变图片颜色\n的深度。为了提供这个功能，我们可以创建一个合适的自定义对话框。\n\ncustomdialog.h\n\n    #include <wx/wx.h>\n    class CustomDialog : public wxDialog\n    {\n    public:\n     CustomDialog(const wxString& title);\n    };\n\n\ncustomdialog.cpp\n\n    #include \"customdialog.h\"\n    \n    CustomDialog::CustomDialog(const wxString & title)\n     : wxDialog(NULL, -1, title, wxDefaultPosition, wxSize(250, 230))\n    {\n     wxPanel *panel = new wxPanel(this, -1);\n     wxBoxSizer *vbox = new wxBoxSizer(wxVERTICAL);\n     wxBoxSizer *hbox = new wxBoxSizer(wxHORIZONTAL);\n     wxStaticBox *st = new wxStaticBox(panel, -1, wxT(\"Colors\"), \n     wxPoint(5, 5), wxSize(240, 150));\n     wxRadioButton *rb = new wxRadioButton(panel, -1, \n     wxT(\"256 Colors\"), wxPoint(15, 30), wxDefaultSize, wxRB_GROUP);\n     wxRadioButton *rb1 = new wxRadioButton(panel, -1, \n     wxT(\"16 Colors\"), wxPoint(15, 55));\n     wxRadioButton *rb2 = new wxRadioButton(panel, -1, \n     wxT(\"2 Colors\"), wxPoint(15, 80));\n     wxRadioButton *rb3 = new wxRadioButton(panel, -1, \n     wxT(\"Custom\"), wxPoint(15, 105));\n     wxTextCtrl *tc = new wxTextCtrl(panel, -1, wxT(\"\"), \n     wxPoint(95, 105));\n     wxButton *okButton = new wxButton(this, -1, wxT(\"Ok\"), \n     wxDefaultPosition, wxSize(70, 30));\n     wxButton *closeButton = new wxButton(this, -1, wxT(\"Close\"), \n     wxDefaultPosition, wxSize(70, 30));\n     hbox->Add(okButton, 1);\n     hbox->Add(closeButton, 1, wxLEFT, 5);\n     vbox->Add(panel, 1);\n     vbox->Add(hbox, 0, wxALIGN_CENTER | wxTOP | wxBOTTOM, 10);\n     SetSizer(vbox);\n     Centre();\n     ShowModal();\n     Destroy(); \n    }\n\n\nmain.h\n\n    #include <wx/wx.h>\n    \n    class MyApp : public wxApp\n    {\n     public:\n     virtual bool OnInit();\n    };\n\n\nmain.cpp\n\n    #include \"main.h\"\n    #include \"customdialog.h\"\n    \n    IMPLEMENT_APP(MyApp);\n    \n    bool MyApp::OnInit()\n    {\n     CustomDialog *custom = new CustomDialog(wxT(\"CustomDialog\"));\n     custom->Show(true);\n     return true;\n    }\n\nCMakeLists.txt\n\n    cmake_minimum_required(VERSION 3.16)\n    project(customdialog)\n    \n    set(CMAKE_CXX_STANDARD 14)\n    \n    #添加预编译指令\n    add_definitions(\n            -DwxMSVC_VERSION_AUTO=1\n            -DwxMSVC_VERSION_COMPAT=1\n    )\n    \n    #包含搜索路径\n    include_directories(\n            $ENV{WXWIN}/include\n            $ENV{WXWIN}/lib/vc14x_lib/mswud\n    )\n    \n    #指定链接库目录\n    link_directories(\n            $ENV{WXWIN}/lib/vc14x_lib\n    )\n    \n    #添加可执行文件\n    add_executable(\n            ${PROJECT_NAME}\n            main.cpp main.h\n            customdialog.cpp customdialog.h)\n    \n    #设置可执行程序属性\n    set_target_properties(\n            ${PROJECT_NAME}\n                PROPERTIES\n            WIN32_EXECUTABLE true\n            MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>\"\n    )\n    \n    #链接所使用的库到可执行文件\n    target_link_libraries(\n            ${PROJECT_NAME}\n            shlwapi.lib\n            version.lib\n            comctl32.lib\n            rpcrt4.lib\n            ws2_32.lib\n            wininet.lib\n            winmm.lib\n            wxmsw32ud_gl.lib\n            wxmsw32ud_stc.lib\n            wxmsw32ud_richtext.lib\n            wxmsw32ud_propgrid.lib\n            wxmsw32ud_ribbon.lib\n            wxmsw32ud_aui.lib\n            wxmsw32ud_xrc.lib\n            wxbase32ud_xml.lib\n            wxmsw32ud_qa.lib\n            wxmsw32ud_webview.lib\n            wxmsw32ud_html.lib\n            wxmsw32ud_media.lib\n            wxmsw32ud_adv.lib\n            wxmsw32ud_core.lib\n            wxbase32ud_net.lib\n            wxbase32ud.lib\n            wxscintillad.lib\n            wxexpatd.lib\n            wxtiffd.lib\n            wxjpegd.lib\n            wxpngd.lib\n            wxzlibd.lib\n            wxregexud.lib\n            wxmsw32u_gl.lib\n    )","edit_time_ms":1665236457632,"char_count":{"word":370,"char_without_spaces":2541,"char_with_spaces":3580},"snapshots":[{"id":"01gz65efecrae00x2rm84cygk1","item_id":"01gevqrs5gdz5azz3ga1jms768","add_time_ms":1682760482252,"hash":"834d9b240191a400e39233ba54c849de","length":3729,"char_count_char_with_spaces":3580,"char_count_char_without_spaces":2541,"char_count_word":370}]}