{"id":"01gernbrmfctc7ptjs8hdeghnt","add_time_ms":1665127539343,"icon":"book","type":"doc","title":"文件对话框","_id":"48","content":"文件对话框\n\n这是一个常用的打开和保存文件的对话框.\n\nopenfile.h\n\n    #include <wx/wx.h>\n    class Openfile : public wxFrame\n    {\n    public:\n     Openfile(const wxString& title);\n     void OnOpen(wxCommandEvent& event);\n     wxTextCtrl *tc;\n    };\n\n\nopenfile.cpp\n\n    #include \"openfile.h\"\n    Openfile::Openfile(const wxString & title)\n     : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(300, 200))\n    {\n     wxMenuBar *menubar = new wxMenuBar;\n     wxMenu *file = new wxMenu;\n     file->Append(wxID_OPEN, wxT(\"&Open\"));\n     menubar->Append(file, wxT(\"&File\"));\n     SetMenuBar(menubar);\n     Connect(wxID_OPEN, wxEVT_COMMAND_MENU_SELECTED, \n     wxCommandEventHandler(Openfile::OnOpen));\n     tc = new wxTextCtrl(this, -1, wxT(\"\"), wxPoint(-1, -1), \n     wxSize(-1, -1), wxTE_MULTILINE);\n     Center();\n    }\n    \n    void Openfile::OnOpen(wxCommandEvent& event)\n    {\n     wxFileDialog * openFileDialog = new wxFileDialog(this);\n     if (openFileDialog->ShowModal() == wxID_OK){\n     wxString fileName = openFileDialog->GetPath();\n     tc->LoadFile(fileName); \n     }\n    }\n\n\nmain.h\n\n    #include <wx/wx.h>\n    class MyApp : public wxApp\n    {\n     public:\n     virtual bool OnInit();\n    };\n    \n    \nmain.cpp\n\n    #include \"main.h\"\n    #include \"openfile.h\"\n    IMPLEMENT_APP(MyApp)\n    bool MyApp::OnInit()\n    {\n     Openfile *open = new Openfile(wxT(\"Openfile\"));\n     open->Show(true);\n     return true;\n    }\n    \n \nCMakeLists.txt\n\n    cmake_minimum_required(VERSION 3.16)\n    project(FileDialog)\n    \n    set(CMAKE_CXX_STANDARD 14)\n    \n    #设置预编译指令\n    add_definitions(\n            -DwxMSVC_VERSION_AUTO=1\n            -DwxMSVC_VERSION_COMPAT=1\n    )\n    \n    #设置包含目录\n    include_directories(\n            $ENV{WXWIN}/include\n            $ENV{WXWIN}/lib/vc14x_lib/mswud\n    )\n    \n    #设置链接库目录\n    link_directories(\n            $ENV{WXWIN}/lib/vc14x_lib\n    )\n    \n    #添加可执行文件\n    add_executable(\n            ${PROJECT_NAME}\n            main.cpp main.h openfile.cpp openfile.h)\n    \n    #设置程序运行的窗口模式\n    if (CMAKE_SYSTEM_NAME STREQUAL \"Windows\")\n        set_property(\n                TARGET ${PROJECT_NAME} PROPERTY\n                WIN32_EXECUTABLE true\n        )\n    endif ()\n    \n    #设置程序的调试模式\n    set_property(\n            TARGET ${PROJECT_NAME} PROPERTY\n            MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>\"\n    )\n    \n    #链接所需的库到目标可执行文件(${PROJECT_NAME})\n    target_link_libraries(\n            ${PROJECT_NAME}\n            shlwapi.lib\n            version.lib\n            comctl32.lib\n            rpcrt4.lib\n            ws2_32.lib\n            wininet.lib\n            winmm.lib\n            wxmsw32ud_gl.lib\n            wxmsw32ud_stc.lib\n            wxmsw32ud_richtext.lib\n            wxmsw32ud_propgrid.lib\n            wxmsw32ud_ribbon.lib\n            wxmsw32ud_aui.lib\n            wxmsw32ud_xrc.lib\n            wxbase32ud_xml.lib\n            wxmsw32ud_qa.lib\n            wxmsw32ud_webview.lib\n            wxmsw32ud_html.lib\n            wxmsw32ud_media.lib\n            wxmsw32ud_adv.lib\n            wxmsw32ud_core.lib\n            wxbase32ud_net.lib\n            wxbase32ud.lib\n            wxscintillad.lib\n            wxexpatd.lib\n            wxtiffd.lib\n            wxjpegd.lib\n            wxpngd.lib\n            wxzlibd.lib\n            wxregexud.lib\n            wxmsw32u_gl.lib\n    )\n\n\n\n","edit_time_ms":1665139493525,"char_count":{"word":288,"char_without_spaces":2188,"char_with_spaces":3163},"snapshots":[{"id":"01gz65efe5znwsv2xhm44rhrhf","item_id":"01gernbrmfctc7ptjs8hdeghnt","add_time_ms":1682760482245,"hash":"2b1fd7087c5ad871fee9d22a075cfbd6","length":3311,"char_count_char_with_spaces":3163,"char_count_char_without_spaces":2188,"char_count_word":288}]}