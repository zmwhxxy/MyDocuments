{"id":"01hyvt1vg7hn88y77exs5c4b22","add_time_ms":1716772728327,"type":"doc","_id":"172","char_count":{"word":242,"char_without_spaces":1312,"char_with_spaces":2169,"char_all":2301},"title":"角色相关逻辑说明","content":"人物朝向：enum RoleDirection {\n    back = -1,\n    front = 1\n }\n\n人物状态：enum RoleState  {\n    recovery,\n    idle,\n    run_left,\n    run_right,\n    jump_up,\n    fall_down,\n    death\n}\n\n与状态相关的属性：{\n    direction： {back = -1, front = 1}\n    speed：{x, y}\n    spine: {huifu, idle, left, right, up, down, death}\n}\n\n\n各个状态关联的属性\nidle {\n    spine: setAnimatioe(0, 'idle', true)\n    speed.x = 0\n    speed.y = 0\n}\n\nrun_left {\n    spine: setAnimation(0, 'left', true)\n    speed.x < 0\n }\n \n run_right{\n     spine: setAnimation(0, 'right', true)\n     speed.x > 0\n }\n \n jump_up{\n     spine: setAnimation(0, 'up', false)\n     speed.y > 0\n }\n \n fall_down{\n     spine:setAnimation(0, 'down', false)\n     speed.y < 0\n }\n \n death{\n     speed.x = 0\n     speed.y = 0\n }\n \n \n \n \n     switch (this.curState) {\n            case State.HUI_FU:\n            case State.IDLE:\n            case State.RUN_LEFT:\n            case State.JUMP_UP:\n            case State.RUN_RIGHT:\n            case State.FALL_DOWN:\n            case State.DEATH:\n                break;\n        }\n \n spine状态切换规则\n toIdle() {\n     switch (this.curState) {\n            case State.HUI_FU:\n            case State.RUN_LEFT:\n            case State.RUN_RIGHT:\n            case State.FALL_DOWN:\n                this.idle();\n                break;\n        }\n }\n \n toRunLeft(){\n   switch (this.curState) {\n            case State.HUI_FU:\n            case State.IDLE:\n            case State.RUN_RIGHT:\n                runLeft();\n                break;\n        }\n   }\n \n\ntoRunRight() {\n    switch (this.curState) {\n            case State.HUI_FU:\n            case State.IDLE:\n            case State.RUN_LEFT:\n              this.runRight();\n                break;\n        }\n}\n \n toJumpUp() {\n     switch (this.curState) {\n            case State.IDLE:\n            case State.RUN_LEFT:\n            case State.RUN_RIGHT:\n                this.jumpUp();\n                break;\n        }\n }\n \n \n  toFallDown() {\n      switch (this.curState) {\n            case State.JUMP_UP:\n               this.fallDown();\n                break;\n        }  \n   }\n   \n   \n   toDie() {\nswitch (this.curState) {\n            \n    \n            case State.RUN_LEFT:\n       \n            case State.RUN_RIGHT:\n            case State.FALL_DOWN:\n              this.death();\n              break;\n        }\n    }  jj","edit_time_ms":1716781678549,"snapshots":[{"id":"01jdc8smsa04ympxdvxyhqvkqc","item_id":"01hyvt1vg7hn88y77exs5c4b22","add_time_ms":1732357444394,"hash":"b59dc0afc41952c5e8b56b637db34d14","length":2301,"char_count_char_with_spaces":2169,"char_count_char_without_spaces":1312,"char_count_word":242,"version_key":1}]}