{"id":"01gz65effay8e7658532jk8169","item_id":"01gf8m2rjtb3e2behjvy802s1v","add_time_ms":1682760482282,"hash":"f6e4ffd8a1382fa965d64c72f2e1ae34","full_content":"列表框\n\n  wxListBox小部件用于显示和处理项目列表。顾名思义，它是一个矩形，里面有一个字符串列表。我们可以使用它来显示MP3文件、图书名称、大型项目的模块名称或朋友的名称的列表。wxListBox可以在两种不同的状态下创建:单选择状态或多选择状态。单选择状态是默认状态。\n  \n  wxListBox中有两个重要事件。第一个是wxEVT_COMMAND_LISTBOX_SELECTED事件。当我们在wxListBox中选择一个字符串时，会生成此事件。第二个是wxEVT_COMMAND_LISTBOX_DOUBLE_CLICKED事件。它是在双击wxListBox中的项目时生成的。在GTK平台上，wxListBox中的元素数量是有限的。根据文档，目前大约有2000个元素。元素从零开始编号。如果需要，滚动条会自动显示。\n\nListbox.h\n\n    #include <wx/wx.h>\n    #include <wx/listbox.h>\n    class MyPanel : public wxPanel\n    {\n    public:\n     MyPanel(wxPanel *parent);\n     void OnNew(wxCommandEvent& event);\n     void OnRename(wxCommandEvent& event);\n     void OnClear(wxCommandEvent& event);\n     void OnDelete(wxCommandEvent& event);\n     wxListBox *m_lb;\n     wxButton *m_newb;\n     wxButton *m_renameb;\n     wxButton *m_clearb;\n     wxButton *m_deleteb;\n    };\n    class Listbox : public wxFrame\n    {\n    public:\n     Listbox(const wxString& title);\n     void OnDblClick(wxCommandEvent& event);\n     wxListBox *listbox;\n     MyPanel *btnPanel;\n    };\n    const int ID_RENAME = 1;\n    const int ID_LISTBOX = 5;\n    \nListbox.cpp\n\n    #include \"listbox.h\"\n    #include <wx/textdlg.h>\n    Listbox::Listbox(const wxString& title)\n     : wxFrame(NULL, wxID_ANY, title, wxDefaultPosition, wxSize(270, 200))\n    {\n     wxPanel * panel = new wxPanel(this, -1);\n     wxBoxSizer *hbox = new wxBoxSizer(wxHORIZONTAL);\n     listbox = new wxListBox(panel, ID_LISTBOX, \n     wxPoint(-1, -1), wxSize(-1, -1)); \n     hbox->Add(listbox, 3, wxEXPAND | wxALL, 20);\n     btnPanel = new MyPanel(panel);\n     hbox->Add(btnPanel, 2, wxEXPAND | wxRIGHT, 10);\n     Connect(wxEVT_COMMAND_LISTBOX_DOUBLECLICKED, \n     wxCommandEventHandler(Listbox::OnDblClick));\n     panel->SetSizer(hbox);\n     Center(); \n    }\n    MyPanel::MyPanel(wxPanel * parent)\n     : wxPanel(parent, wxID_ANY)\n    {\n     wxBoxSizer *vbox = new wxBoxSizer(wxVERTICAL);\n     Listbox *lb = (Listbox *) parent->GetParent();\n     m_lb = lb->listbox;\n     m_newb = new wxButton(this, wxID_NEW, wxT(\"New\"));\n     m_renameb = new wxButton(this, ID_RENAME, wxT(\"Rename\"));\n     m_deleteb = new wxButton(this, wxID_DELETE, wxT(\"Delete\"));\n     m_clearb = new wxButton(this, wxID_CLEAR, wxT(\"Clear\"));\n     Connect(wxID_NEW, wxEVT_COMMAND_BUTTON_CLICKED, \n     wxCommandEventHandler(MyPanel::OnNew) );\n     Connect(ID_RENAME, wxEVT_COMMAND_BUTTON_CLICKED, \n     wxCommandEventHandler(MyPanel::OnRename) );\n     Connect(wxID_CLEAR, wxEVT_COMMAND_BUTTON_CLICKED, \n     wxCommandEventHandler(MyPanel::OnClear) );\n     Connect(wxID_DELETE, wxEVT_COMMAND_BUTTON_CLICKED, \n     wxCommandEventHandler(MyPanel::OnDelete) );\n     vbox->Add(-1, 20);\n     vbox->Add(m_newb);\n     vbox->Add(m_renameb, 0, wxTOP, 5);\n     vbox->Add(m_deleteb, 0, wxTOP, 5);\n     vbox->Add(m_clearb, 0, wxTOP, 5);\n     SetSizer(vbox);\n    }\n    void MyPanel::OnNew(wxCommandEvent& event) \n    {\n     wxString str = wxGetTextFromUser(wxT(\"Add new item\"));\n     if (str.Len() > 0)\n     m_lb->Append(str); \n    }\n    void MyPanel::OnClear(wxCommandEvent& event) \n    {\n     m_lb->Clear();\n    }\n    void MyPanel::OnRename(wxCommandEvent& event) \n    {\n     wxString text;\n     wxString renamed;\n     \n     int sel = m_lb->GetSelection();\n     if (sel != -1) {\n     text = m_lb->GetString(sel);\n     renamed = wxGetTextFromUser(wxT(\"Rename item\"), \n     wxT(\"Rename dialog\"), text);\n     }\n     if (!renamed.IsEmpty()) {\n     m_lb->Delete(sel);\n     m_lb->Insert(renamed, sel);\n     }\n    }\n    void MyPanel::OnDelete(wxCommandEvent& event) \n    {\n     int sel = m_lb->GetSelection();\n     if (sel != -1) {\n     m_lb->Delete(sel);\n     }\n    }\n    void Listbox::OnDblClick(wxCommandEvent& event) \n    {\n     wxString text;\n     wxString renamed;\n     int sel = listbox->GetSelection();\n     if (sel != -1) {\n     text = listbox->GetString(sel);\n     renamed = wxGetTextFromUser(wxT(\"Rename item\"), \n     wxT(\"Rename dialog\"), text);\n     } \n     if (!renamed.IsEmpty()) {\n     listbox->Delete(sel);\n     listbox->Insert(renamed, sel);\n     }\n    }\n    \nmain.h\n\n    #include <wx/wx.h>\n    class MyApp : public wxApp\n    {\n     public:\n     virtual bool OnInit();\n    };\n    \nmain.cpp\n\n    #include \"main.h\"\n    #include \"Listbox.h\"\n    IMPLEMENT_APP(MyApp)\n    bool MyApp::OnInit()\n    {\n     Listbox *listbox = new Listbox(wxT(\"Listbox\"));\n     listbox->Show(true);\n     return true;\n    }\n    \nCMakeLists.txt\n\n    cmake_minimum_required(VERSION 3.16)\n    project(listbox)\n    \n    set(CMAKE_CXX_STANDARD 14)\n    \n    add_definitions(\n            -DwxMSVC_VERSION_AUTO=1\n            -DwxMSVC_VERSION_COMPAT=1\n    )\n    \n    include_directories(\n            $ENV{WXWIN}/include\n            $ENV{WXWIN}/lib/vc14x_lib/mswud\n    )\n    \n    link_directories(\n            $ENV{WXWIN}/lib/vc14x_lib\n    )\n    \n    add_executable(\n            ${PROJECT_NAME}\n            main.cpp main.h\n            listbox.cpp listbox.h )\n    \n    set_target_properties(\n            ${PROJECT_NAME}\n                PROPERTIES\n            MSVC_RUNTIME_LIBRARY \"MultiThreaded$<$<CONFIG:Debug>:Debug>\"\n            WIN32_EXECUTABLE true\n    )\n\n    target_link_libraries(\n        ${PROJECT_NAME}\n        shlwapi.lib\n        version.lib\n        comctl32.lib\n        rpcrt4.lib\n        ws2_32.lib\n        wininet.lib\n        winmm.lib\n        wxmsw32ud_gl.lib\n        wxmsw32ud_stc.lib\n        wxmsw32ud_richtext.lib\n        wxmsw32ud_propgrid.lib\n        wxmsw32ud_ribbon.lib\n        wxmsw32ud_aui.lib\n        wxmsw32ud_xrc.lib\n        wxbase32ud_xml.lib\n        wxmsw32ud_qa.lib\n        wxmsw32ud_webview.lib\n        wxmsw32ud_html.lib\n        wxmsw32ud_media.lib\n        wxmsw32ud_adv.lib\n        wxmsw32ud_core.lib\n        wxbase32ud_net.lib\n        wxbase32ud.lib\n        wxscintillad.lib\n        wxexpatd.lib\n        wxtiffd.lib\n        wxjpegd.lib\n        wxpngd.lib\n        wxzlibd.lib\n        wxregexud.lib\n        wxmsw32u_gl.lib\n    )","_id":"33"}