{"id":"01jdgkvgvfs2cxq7yh0m5j8ch4","item_id":"01jdec6x1vrc47tpe518xqxmvd","add_time_ms":1732503257967,"hash":"27ec9e5d61c78fd3719a7edd15273dab","version_key":1,"full_content":"### 设置环境变量\n\n#### 编写test_env.lua文件\n在skynet中，使用skynet.setenv函数来设置一个新的环境变量（必须是新的，yuan'l）\n\nlocal skynet = require(\"skynet\")\n\nskynet.start(function()\n    local name = skynet.getenv(\"myname\")\n    local age = skynet.getenv(\"myage\")\n\n    skynet.error(\"My name is\", name, \"and I'm\", age, \"'s old\")\nend)\n\n\n#### 编写test_env_cf文件\n\n-- 路径设置\nroot = \"./\"\nluaservice = root..\"service/?.lua;\" .. root .. \"project/?.lua\"\nlualoader = root .. \"lualib/loader.lua\"\nlua_path = root..\"lualib/?.lua;\"..root..\"lualib/?/init.lua\"\nlua_cpath = root .. \"luaclib/?.so\"\n\n-- 设置环境变量\nmyname = \"eli\"\nmyage = 30\n\n-- 参数配置\nthread = 8\nlogger = nil\nlogpath = \".\"\nharbor = 1\naddress = \"127.0.0.1:2526\"\nmaster = \"127.0.0.1:2024\"\n\n-- 启动test服务\nstart = \"test_env\"\nbootstrap = \"snlua bootstrap\"\nstandalone = \"0.0.0.0:2024\"\ncpath = root..\"cservice/?.so\"\n\n#### 执行test_env服务\n\n在linux终端中执行以下命令：\n        ./skynet test_env_cf\n \n 执行成功后终端打印如下内容：\n \n    [:01000002] LAUNCH snlua bootstrap\n    [:01000003] LAUNCH snlua launcher\n    [:01000004] LAUNCH snlua cmaster\n    [:01000004] master listen socket 0.0.0.0:2024\n    [:01000005] LAUNCH snlua cslave\n    [:01000005] slave connect to master 127.0.0.1:2024\n    [:01000004] connect from 127.0.0.1:48132 4\n    [:01000006] LAUNCH harbor 1 16777221\n    [:01000004] Harbor 1 (fd=4) report 127.0.0.1:2526\n    [:01000005] Waiting for 0 harbors\n    [:01000005] Shakehand ready\n    [:01000007] LAUNCH snlua datacenterd\n    [:01000008] LAUNCH snlua service_mgr\n    [:01000009] LAUNCH snlua test_env\n    [:01000009] My name is eli and I'm 30 's old\n    [:01000002] KILL self\n\n\n\n\n","_id":"169"}